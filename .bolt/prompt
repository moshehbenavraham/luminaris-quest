# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  Luminari's Quest Â· Persistent Build Rules for Bolt.new
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  Purpose
#  â€¢ Prevent "run-away generator" behaviour by scoping every build.
#  â€¢ Encode project-wide tech stack, style guide, and contest limits.
#  â€¢ Loaded automatically; do NOT repeat these rules in individual prompts.
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## 0. Stack Snapshot  (reference â€“ do not override)
TECH_FRONTEND          = React 18 + TypeScript 5 (Vite)
STYLING                = Tailwind CSS (JIT)  +  Shadcn/UI components
STATE_MANAGEMENT       = Zustand with persistence and hydration safety
BACKEND_API            = Supabase JS client (only calls, no schema edits)
AI_SERVICES            = OpenAI (narrative) Â· Leonardo.AI (visuals) Â· ElevenLabs (voice)
DEPLOY_TARGET          = Netlify
FILE_STRUCTURE_ROOT    = src/
  â€¢ src/pages/         = route entry points (Home, Adventure, Progress, Profile, Legal)
  â€¢ src/components/    = atomic UI pieces (including JournalEntryCard with CRUD)
  â€¢ src/hooks/         = reusable logic
  â€¢ src/services/      = API wrappers & helpers
  â€¢ src/store/         = Zustand state management
  â€¢ src/engine/        = game logic and scene engine
ENV_PLACEHOLDERS_FILE  = .env.example

## 1. Scope & Safety Rules  (highest priority)
1.  ONLY edit file(s) explicitly *Targeted* in the current Build run.
2.  NEVER create, rename, or delete files, routes, tests, styles, or data models
    unless the prompt says "add ___".
3.  If the prompt violates Rule 1 or 2, raise a warning comment instead of acting.
4.  Keep every build **idempotent** and **compilable**â€”running twice must leave code unchanged AND building successfully.
5.  **Verify before claiming**: If you say you added an import, the import must actually be in the code.
6.  **No circular imports**: Never create re-export files that import from what they're trying to export.
7.  Do not reference or import libraries outside TECH_FRONTEND & STYLING stack.
8.  Never modify configuration files (vite.config.ts, tsconfig.*.json, etc.) unless prompted.
9.  Never modify environment files (.env, .env.*) or documentation unless explicitly requested.

## 1.5. Build Safety & Error Prevention (CRITICAL - MUST FOLLOW)
1.  **NEVER create circular imports**:
    - Do NOT create re-export files like `src/components/ui/use-toast.ts`
    - Import hooks directly from `@/hooks/` not from UI components
    - If you see an import like `import X from "@/components/ui/use-X"` for hooks, FLAG IT as circular
2.  **Import Validation**:
    - ALWAYS verify imports exist before using them
    - Never import `resetGame` without adding it to destructuring: `const { completeScene, resetGame } = useGameStore()`
    - Never import `milestones` without adding it to destructuring
    - Before using any variable, ensure it's properly imported and destructured
3.  **State Management Rules**:
    - Zustand store changes require updating BOTH interface AND destructuring
    - When adding store actions, update ALL components that need them
    - NEVER claim to have made changes without actually implementing them
    - Store updates must update interface, implementation, AND all consuming components
4.  **TypeScript Compilation**:
    - Every change must be TypeScript valid
    - Undefined variables are BUILD FAILURES - fix imports first
    - Missing dependencies in useEffect arrays are warnings - include them
    - Changes must be syntactically valid TypeScript
5.  **Test Before Claiming Success**:
    - If you say "X is now working", the code must actually implement X
    - Don't claim imports are added if they're not in the destructuring
    - Verify function calls match available store actions
    - No phantom changes - every claimed change must exist in the actual code

## 2. Component Design Principles (Atomic Design)
â€¢ Follow atomic design principles for all components:
  - Atoms: Basic UI elements (Button, Input, Card)  
  - Molecules: Composite components (AuthForm, NavItem, JournalEntryCard)  
  - Organisms: Complex components (Layout, Sidebar, Adventure, Progress)
â€¢ All components must:
  - Use TypeScript with strict mode; no `any` unless explicitly allowed
  - Be under 500 lines (split into subcomponents if needed)
  - Use Tailwind CSS for styling onlyâ€”no separate CSS/Sass files
  - Use Shadcn/UI components as base: `import { Button } from "@/components/ui/button"`
  - Use Lucide icons for navigation/actions
  - Include proper accessibility attributes (ARIA, keyboard nav, screen reader support)
â€¢ File naming:
  - React components: PascalCase (e.g., AuthForm.tsx, JournalEntryCard.tsx)
  - Utilities/hooks: camelCase (e.g., useAuth.ts)
  - Test files: *.test.tsx

## 3. Project Roadmap & Task Tracking
â€¢ Component architecture has been refactored:
  - âœ… Page components extracted to src/pages/
  - âœ… Journal system enhanced with full CRUD operations
  - âœ… TypeScript compilation errors resolved
  - âœ… Code quality improvements with ESLint and Prettier
â€¢ Follow component priority in docs/COMPONENT_MAP.md for new features
â€¢ Track current focus through GitHub Issues/PRs and CHANGELOG.md

## 4. Prompt Format Expectations
â€¢ The incoming prompt must follow the SPECS-E pattern  
  (State Â· Platform Â· Examples Â· Constraints Â· Success).
â€¢ If any SPECS-E section is missing or ambiguous, ask for clarification in *Discussion*
  modeâ€”do NOT skip straight to code.

## 5. Coding Conventions
â€¢ TypeScript strict mode; no `any` unless explicitly allowed.  
â€¢ Tailwind classes onlyâ€”no separate CSS/Sass files.  
â€¢ Use Shadcn/UI imports: `import { Button } from "@/components/ui/button"` etc.  
â€¢ Keep imports sorted alphabetically; prefer absolute imports via `@/` alias if configured.
â€¢ **Import Safety**: Before using any variable, ensure it's properly imported and destructured.
â€¢ **Store Updates**: When modifying Zustand store, update interface, implementation, AND all consuming components.
â€¢ **No Phantom Changes**: Never claim to have made a change without actually implementing it in code.
â€¢ **Build Verification**: Changes must be syntactically valid TypeScript.
â€¢ Provide TODO comments for future logic; avoid filler lorem ipsum.
â€¢ Add JSDoc comments for all components and functions.
â€¢ Write tests for new features using Vitest.

## 6. Environment & API Requirements
â€¢ Required environment variables (reference .env.example):
  - VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY
  - VITE_OPENAI_API_KEY, VITE_LEONARDO_API_KEY, VITE_ELEVENLABS_API_KEY (planned)
â€¢ Read runtime secrets exclusively from `process.env.*`; never hard-code keys.  
â€¢ If a required env var is missing, leave a TODO and reference `.env.example`.  
â€¢ Do not alter `.env.example` unless the prompt specifies new placeholders.
â€¢ Use proper error handling for missing env vars.

## 7. Narrative & IP Constraints
â€¢ Respect established lore: protagonist **Luminari** journeys through **Lumina**,
  an RPG adventure aimed at healing trauma from parental loss & homelessness.  
â€¢ Game content must follow OGL/ORC licensing; never use third-party RPG IP or "Product Identity".
â€¢ OGL/Pathfinder mechanics are allowed, but **never name "Pathfinder" in code or text**.  
â€¢ All generated text, variables, and comments must remain PG-13.
â€¢ Maintain "Built with Bolt.new" attribution in Footer.
â€¢ Update licenses/third-party.md when adding new dependencies.

## 8. Quality Gates & Error Handling
â€¢ Code **must compile** (`npm run build`) and **lint clean** (`npm run lint`).  
â€¢ No ESLint warnings are acceptable unless waived in the prompt.  
â€¢ CI workflow lives in `.github/workflows/ci.yml`; do not edit it unless asked.
â€¢ Use ErrorBoundary for React errors; implement proper loading states.
â€¢ Handle API errors gracefully; validate environment variables.
â€¢ Test in production mode before deploying; monitor for blank screens.
â€¢ **Deployment Safety**: Every change must be verified to not break builds.
â€¢ **Import Verification**: All imports must resolve to existing files/exports.

## 9. Documentation & Commit Standards
â€¢ Keep core documentation files updated: README.md, CONTRIBUTING.md, CHANGELOG.md, docs/COMPONENT_MAP.md.
â€¢ Write conventional commit messages: feat/fix/docs/style/refactor/test/chore.
â€¢ Stage only files related to current task; keep commits atomic and focused.

### 9.1 Document Library
While this project is primarily built using the 'Bolt.new' platform, it also integrates multiple other development platforms and tools. For documentation and comprehensive development guidelines:

- **README.md**
- **Cursor IDE Integration:** .cursorignore for files that Cursor should not include in context.
  Reference `.cursor/` for Cursor IDE component and layout guidelines
    - *Note not a document, but part of Cursor config for background agents: environment.json
    - `.cursor/rules/`
      - layout-integration.mdc
      - project-context.mdc
      - sidebar-navigation.mdc
- **Claude Code - Agentic AI Coder:** See `CLAUDE.md` for Claude Code's guidance
  `.claude/settings.local.json` - Settings for Claude Code
- **Roo Code Orchestration Modes:** `.roomodes` defines per-project AI task orchestration settings for Roo Code and Cursor. It enables custom multi-agent workflows (e.g., Boomerang Mode) to be scoped and run only within this project.
- **Component Roadmap:** Check `docs/COMPONENT_MAP.md` for build priorities and component relationships
- **Change Log:** CHANGELOG.md - document all notable changes to Luminari's Quest
- **Contributing Guidelines:** See `CONTRIBUTING.md` for code quality, testing, and commit standards
- **Legal Compliance:** Reference `LICENSE` and `licenses/` directory for OGL/ORC licensing requirements
- **Configuration Standards:** Follow `eslint.config.js`, `.prettierrc`, and `tsconfig.*.json` for code quality
- **[Environment Architecture](docs/ENVIRONMENT_ARCHITECTURE.md)** - Multi-environment setup and deployment strategy
- **OTHER Documentation:**:
  - CODE_OF_CONDUCT.md
  - FAQ.md

## 10. Output Etiquette
â€¢ Respond with **code blocks only** when generating files. No extra commentary.  
â€¢ Prepend each generated file with `// GENERATED BY BOLT.NEW â€“ DO NOT EDIT MANUALLY`
  unless the prompt overrides.  
â€¢ If an instruction conflicts with any rule above, defer to **Scope & Safety Rules** Â§1 and **Build Safety** Â§1.5.
â€¢ **Truth in Reporting**: Only claim changes that are actually implemented in the code.

## 11. Cross-Platform Integration
â€¢ Cursor IDE rules: See .cursor/rules/ for component layout and navigation standards
â€¢ Component roadmap: Reference docs/COMPONENT_MAP.md for build priority and status
â€¢ Code quality: Follow eslint.config.js, .prettierrc, and tsconfig.*.json standards
â€¢ Documentation: Maintain consistency with README.md, CONTRIBUTING.md standards
â€¢ Legal compliance: Reference licenses/ directory and LICENSE for OGL/attribution rules

## 12. Critical Anti-Patterns (NEVER DO THESE)
â€¢ âŒ Creating `src/components/ui/use-*.ts` files (causes circular imports)
â€¢ âŒ Claiming to add imports without updating destructuring assignments
â€¢ âŒ Using undefined variables (breaks TypeScript compilation)
â€¢ âŒ Modifying store interfaces without updating consuming components
â€¢ âŒ Saying changes are complete when they're not actually implemented
â€¢ âŒ Importing hooks from UI components instead of hooks directory
â€¢ âŒ Breaking existing functionality while adding new features
â€¢ âŒ Deploying code that doesn't compile or has TypeScript errors

## 13. Current Project Status
â€¢ âœ… Page components properly extracted to src/pages/
â€¢ âœ… Journal system enhanced with JournalEntryCard CRUD functionality
â€¢ âœ… TypeScript compilation errors resolved
â€¢ âœ… ESLint configuration updated with browser globals
â€¢ âœ… Prettier formatting applied consistently
â€¢ âœ… Component prop interfaces properly typed
â€¢ âœ… Zustand store with hydration safety implemented
â€¢ ğŸš§ Supabase journal persistence (planned)
â€¢ ğŸš§ AI integrations (OpenAI, Leonardo.AI, ElevenLabs) (planned)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  End of .bolt/prompt
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€